#define MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(Features, StructureType)\
template<>\
inline const VkPhysicalDevice##Features *Device::getEnabledExtendedFeatures<VkPhysicalDevice##Features>() const noexcept\
{\
    const VkBaseInStructure *features = findEnabledExtendedFeatures(VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_##StructureType);\
    return reinterpret_cast<const VkPhysicalDevice##Features *>(features);\
}

// Keep extensions in alphabetical order!
namespace magma
{
#ifdef VK_AMD_device_coherent_memory
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(CoherentMemoryFeaturesAMD, COHERENT_MEMORY_FEATURES_AMD)
#endif

#ifdef VK_EXT_4444_formats
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(4444FormatsFeaturesEXT, 4444_FORMATS_FEATURES_EXT)
#endif
#ifdef VK_EXT_astc_decode_mode
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ASTCDecodeFeaturesEXT, ASTC_DECODE_FEATURES_EXT)
#endif
#ifdef VK_EXT_border_color_swizzle
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(BorderColorSwizzleFeaturesEXT, BORDER_COLOR_SWIZZLE_FEATURES_EXT);
#endif
#ifdef VK_EXT_blend_operation_advanced
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(BlendOperationAdvancedFeaturesEXT, BLEND_OPERATION_ADVANCED_FEATURES_EXT)
#endif
#ifdef VK_EXT_buffer_device_address
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(BufferAddressFeaturesEXT, BUFFER_DEVICE_ADDRESS_FEATURES_EXT)
#endif
#ifdef VK_EXT_color_write_enable
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ColorWriteEnableFeaturesEXT, COLOR_WRITE_ENABLE_FEATURES_EXT)
#endif
#ifdef VK_EXT_conditional_rendering
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ConditionalRenderingFeaturesEXT, CONDITIONAL_RENDERING_FEATURES_EXT)
#endif
#ifdef VK_EXT_custom_border_color
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(CustomBorderColorFeaturesEXT, CUSTOM_BORDER_COLOR_FEATURES_EXT)
#endif
#ifdef VK_EXT_depth_clip_control
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(DepthClipControlFeaturesEXT, DEPTH_CLIP_CONTROL_FEATURES_EXT)
#endif
#ifdef VK_EXT_depth_clip_enable
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(DepthClipEnableFeaturesEXT, DEPTH_CLIP_ENABLE_FEATURES_EXT)
#endif
#ifdef VK_EXT_descriptor_indexing
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(DescriptorIndexingFeaturesEXT, DESCRIPTOR_INDEXING_FEATURES_EXT)
#endif
#ifdef VK_EXT_device_memory_report
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(DeviceMemoryReportFeaturesEXT, DEVICE_MEMORY_REPORT_FEATURES_EXT)
#endif
#ifdef VK_EXT_extended_dynamic_state
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ExtendedDynamicStateFeaturesEXT, EXTENDED_DYNAMIC_STATE_FEATURES_EXT)
#endif
#ifdef VK_EXT_extended_dynamic_state2
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ExtendedDynamicState2FeaturesEXT, EXTENDED_DYNAMIC_STATE_2_FEATURES_EXT)
#endif
#ifdef VK_EXT_fragment_density_map
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(FragmentDensityMapFeaturesEXT, FRAGMENT_DENSITY_MAP_FEATURES_EXT)
#endif
#ifdef VK_EXT_fragment_density_map2
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(FragmentDensityMap2FeaturesEXT, FRAGMENT_DENSITY_MAP_2_FEATURES_EXT)
#endif
#ifdef VK_EXT_fragment_shader_interlock
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(FragmentShaderInterlockFeaturesEXT, FRAGMENT_SHADER_INTERLOCK_FEATURES_EXT)
#endif
#ifdef VK_EXT_global_priority_query
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(GlobalPriorityQueryFeaturesEXT, GLOBAL_PRIORITY_QUERY_FEATURES_EXT)
#endif
#ifdef VK_EXT_graphics_pipeline_library
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(GraphicsPipelineLibraryFeaturesEXT, GRAPHICS_PIPELINE_LIBRARY_FEATURES_EXT)
#endif
#ifdef VK_EXT_image_2d_view_of_3d
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(Image2DViewOf3DFeaturesEXT, IMAGE_2D_VIEW_OF_3D_FEATURES_EXT)
#endif
#ifdef VK_EXT_image_robustness
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ImageRobustnessFeaturesEXT, IMAGE_ROBUSTNESS_FEATURES_EXT)
#endif
#ifdef VK_EXT_image_view_min_lod
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ImageViewMinLodFeaturesEXT, IMAGE_VIEW_MIN_LOD_FEATURES_EXT)
#endif
#ifdef VK_EXT_index_type_uint8
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(IndexTypeUint8FeaturesEXT, INDEX_TYPE_UINT8_FEATURES_EXT)
#endif
#ifdef VK_EXT_inline_uniform_block
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(InlineUniformBlockFeaturesEXT, INLINE_UNIFORM_BLOCK_FEATURES_EXT)
#endif
#ifdef VK_EXT_line_rasterization
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(LineRasterizationFeaturesEXT, LINE_RASTERIZATION_FEATURES_EXT)
#endif
#ifdef VK_EXT_memory_priority
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(MemoryPriorityFeaturesEXT, MEMORY_PRIORITY_FEATURES_EXT)
#endif
#ifdef VK_EXT_multi_draw
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(MultiDrawFeaturesEXT, MULTI_DRAW_FEATURES_EXT)
#endif
#ifdef VK_EXT_pageable_device_local_memory
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(PageableDeviceLocalMemoryFeaturesEXT, PAGEABLE_DEVICE_LOCAL_MEMORY_FEATURES_EXT)
#endif
#ifdef VK_EXT_pipeline_creation_cache_control
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(PipelineCreationCacheControlFeaturesEXT, PIPELINE_CREATION_CACHE_CONTROL_FEATURES_EXT)
#endif
#ifdef VK_EXT_primitive_topology_list_restart
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(PrimitiveTopologyListRestartFeaturesEXT, PRIMITIVE_TOPOLOGY_LIST_RESTART_FEATURES_EXT)
#endif
#ifdef VK_EXT_primitives_generated_query
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(PrimitivesGeneratedQueryFeaturesEXT, PRIMITIVES_GENERATED_QUERY_FEATURES_EXT)
#endif
#ifdef VK_EXT_private_data
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(PrivateDataFeaturesEXT, PRIVATE_DATA_FEATURES_EXT)
#endif
#ifdef VK_EXT_provoking_vertex
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ProvokingVertexFeaturesEXT, PROVOKING_VERTEX_FEATURES_EXT)
#endif
#ifdef VK_EXT_rgba10x6_formats
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(RGBA10X6FormatsFeaturesEXT, RGBA10X6_FORMATS_FEATURES_EXT)
#endif
#ifdef VK_EXT_robustness2
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(Robustness2FeaturesEXT, ROBUSTNESS_2_FEATURES_EXT)
#endif
#ifdef VK_EXT_scalar_block_layout
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ScalarBlockLayoutFeaturesEXT, SCALAR_BLOCK_LAYOUT_FEATURES_EXT)
#endif
#ifdef VK_EXT_shader_atomic_float
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShaderAtomicFloatFeaturesEXT, SHADER_ATOMIC_FLOAT_FEATURES_EXT)
#endif
#ifdef VK_EXT_shader_atomic_float2
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShaderAtomicFloat2FeaturesEXT, SHADER_ATOMIC_FLOAT_2_FEATURES_EXT)
#endif
#ifdef VK_EXT_shader_demote_to_helper_invocation
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShaderDemoteToHelperInvocationFeaturesEXT, SHADER_DEMOTE_TO_HELPER_INVOCATION_FEATURES_EXT)
#endif
#ifdef VK_EXT_shader_image_atomic_int64
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShaderImageAtomicInt64FeaturesEXT, SHADER_IMAGE_ATOMIC_INT64_FEATURES_EXT)
#endif
#ifdef VK_EXT_subgroup_size_control
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(SubgroupSizeControlFeaturesEXT, SUBGROUP_SIZE_CONTROL_FEATURES_EXT)
#endif
#ifdef VK_EXT_texel_buffer_alignment
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(TexelBufferAlignmentFeaturesEXT, TEXEL_BUFFER_ALIGNMENT_FEATURES_EXT)
#endif
#ifdef VK_EXT_texture_compression_astc_hdr
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(TextureCompressionASTCHDRFeaturesEXT, TEXTURE_COMPRESSION_ASTC_HDR_FEATURES)
#endif
#ifdef VK_EXT_transform_feedback
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(TransformFeedbackFeaturesEXT, TRANSFORM_FEEDBACK_FEATURES_EXT)
#endif
#ifdef VK_EXT_vertex_attribute_divisor
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(VertexAttributeDivisorFeaturesEXT, VERTEX_ATTRIBUTE_DIVISOR_FEATURES_EXT)
#endif
#ifdef VK_EXT_vertex_input_dynamic_state
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(VertexInputDynamicStateFeaturesEXT, VERTEX_INPUT_DYNAMIC_STATE_FEATURES_EXT)
#endif
#ifdef VK_EXT_ycbcr_2plane_444_formats
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(Ycbcr2Plane444FormatsFeaturesEXT, YCBCR_2_PLANE_444_FORMATS_FEATURES_EXT)
#endif
#ifdef VK_EXT_ycbcr_image_arrays
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(YcbcrImageArraysFeaturesEXT, YCBCR_IMAGE_ARRAYS_FEATURES_EXT)
#endif

#ifdef VK_KHR_8bit_storage
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(8BitStorageFeaturesKHR, 8BIT_STORAGE_FEATURES_KHR)
#endif
#ifdef VK_KHR_16bit_storage
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(16BitStorageFeaturesKHR, 16BIT_STORAGE_FEATURES_KHR)
#endif
#ifdef VK_KHR_buffer_device_address
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(BufferDeviceAddressFeaturesKHR, BUFFER_DEVICE_ADDRESS_FEATURES_KHR)
#endif
#ifdef VK_KHR_multiview
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(MultiviewFeaturesKHR, MULTIVIEW_FEATURES_KHR)
#endif
#ifdef VK_KHR_separate_depth_stencil_layouts
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(SeparateDepthStencilLayoutsFeaturesKHR, SEPARATE_DEPTH_STENCIL_LAYOUTS_FEATURES_KHR)
#endif
#ifdef VK_KHR_shader_atomic_int64
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShaderAtomicInt64FeaturesKHR, SHADER_ATOMIC_INT64_FEATURES_KHR)
#endif
#ifdef VK_KHR_shader_clock
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShaderClockFeaturesKHR, SHADER_CLOCK_FEATURES_KHR)
#endif
#ifdef VK_KHR_shader_float16_int8
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(Float16Int8FeaturesKHR, FLOAT16_INT8_FEATURES_KHR)
#endif
#ifdef VK_KHR_variable_pointers
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(VariablePointerFeaturesKHR, VARIABLE_POINTER_FEATURES_KHR)
#endif
#ifdef VK_KHR_vulkan_memory_model
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(VulkanMemoryModelFeaturesKHR, VULKAN_MEMORY_MODEL_FEATURES_KHR)
#endif

#ifdef VK_NV_compute_shader_derivatives
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ComputeShaderDerivativesFeaturesNV, COMPUTE_SHADER_DERIVATIVES_FEATURES_NV)
#endif
#ifdef VK_NV_cooperative_matrix
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(CooperativeMatrixFeaturesNV, COOPERATIVE_MATRIX_FEATURES_NV)
#endif
#ifdef VK_NV_corner_sampled_image
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(CornerSampledImageFeaturesNV, CORNER_SAMPLED_IMAGE_FEATURES_NV)
#endif
#ifdef VK_NV_coverage_reduction_mode
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(CoverageReductionModeFeaturesNV, COVERAGE_REDUCTION_MODE_FEATURES_NV)
#endif
#ifdef VK_NV_dedicated_allocation_image_aliasing
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(DedicatedAllocationImageAliasingFeaturesNV, DEDICATED_ALLOCATION_IMAGE_ALIASING_FEATURES_NV)
#endif
#ifdef VK_NV_device_diagnostics_config
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(DiagnosticsConfigFeaturesNV, DIAGNOSTICS_CONFIG_FEATURES_NV)
#endif
#ifdef VK_NV_device_generated_commands
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(DeviceGeneratedCommandsFeaturesNV, DEVICE_GENERATED_COMMANDS_FEATURES_NV)
#endif
#ifdef VK_NV_external_memory_rdma
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ExternalMemoryRDMAFeaturesNV, EXTERNAL_MEMORY_RDMA_FEATURES_NV)
#endif
#ifdef VK_NV_fragment_shader_barycentric
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(FragmentShaderBarycentricFeaturesNV, FRAGMENT_SHADER_BARYCENTRIC_FEATURES_NV)
#endif
#ifdef VK_NV_fragment_shading_rate_enums
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(FragmentShadingRateEnumsFeaturesNV, FRAGMENT_SHADING_RATE_ENUMS_FEATURES_NV)
#endif
#ifdef VK_NV_inherited_viewport_scissor
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(InheritedViewportScissorFeaturesNV, INHERITED_VIEWPORT_SCISSOR_FEATURES_NV)
#endif
#ifdef VK_NV_linear_color_attachment
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(LinearColorAttachmentFeaturesNV, LINEAR_COLOR_ATTACHMENT_FEATURES_NV)
#endif
#ifdef VK_NV_mesh_shader
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(MeshShaderFeaturesNV, MESH_SHADER_FEATURES_NV)
#endif
#ifdef VK_NV_ray_tracing_motion_blur
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(RayTracingMotionBlurFeaturesNV, RAY_TRACING_MOTION_BLUR_FEATURES_NV)
#endif
#ifdef VK_NV_representative_fragment_test
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(RepresentativeFragmentTestFeaturesNV, REPRESENTATIVE_FRAGMENT_TEST_FEATURES_NV)
#endif
#ifdef VK_NV_scissor_exclusive
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ExclusiveScissorFeaturesNV, EXCLUSIVE_SCISSOR_FEATURES_NV)
#endif
#ifdef VK_NV_shader_image_footprint
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShaderImageFootprintFeaturesNV, SHADER_IMAGE_FOOTPRINT_FEATURES_NV)
#endif
#ifdef VK_NV_shader_sm_builtins
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShaderSMBuiltinsFeaturesNV, SHADER_SM_BUILTINS_FEATURES_NV)
#endif
#ifdef VK_NV_shading_rate_image
MAGMA_SPECIALIZE_DEVICE_ENABLED_EXTENDED_FEATURES(ShadingRateImageFeaturesNV, SHADING_RATE_IMAGE_FEATURES_NV)
#endif
} // namespace magma
